### 事件（Event）

------

##### 01：事件

- Redis 服务器是一个事件驱动程序， 服务器需要处理两类事件；
- 文件事件：用于处理 Redis 服务器和客户端之间的网络IO的抽象；
- 时间事件：用于处理定时任务的的抽象；

##### 02：文件事件

- Redis 基于 **Reactor 模式**开发了自己的网络事件处理器： 这个处理器被称为**文件事件处理器( file event handler)**。
- 文件事件处理器使用 **IO 多路复用( multiplexing )** 程序来同时监听多个套接字， 并根据套接字目前执行的任务来为**套接字关联不同的事件处理器**。
- 当被监听的套接字准备好执行连接应答（ accept )、读取（ read )、写人( write )、关闭( close ) 等操作时， 与操作相对应的文件事件就会产生， 这时**文件事件处理器就会调用套接字之前关联好的事件处理器来处理这些事件。**

###### 文件事件处理器的构成

- 文件事件处理器分为四个部分
  -  套接字；
  - I/0 多路复用技术；
  - 文件事件分派器(dispatcher )；
  - 事件处理器；
- 文件事件是对套接字操作的抽象，每**当一个套接字准备好执行连接应答(accept )、写人、读取、关闭等操作时**，就会产生一个文件事件。因为一个服务器通常会连接多个套接字， 所以多个文件事件有可能会并发地出现。
- I/0 多路复用技术：负责**监听多个套接字**，并向文件事件分派器**传送产生了事件的套接字**。尽管多个文件事件可能会并发地出现， 但I/0 多路复用程序总是会将所有产生事件的套接字**都放到一个队列里**面， 然后通过这个队列， 以有序( sequentially ) 、同步(synchronously)、每次一个套接字的方式向文件事件分派器传送套接字。当上一个套接字产生的事件被处理完毕之后（ 该套接字为事件**所关联的事件处理器执行完毕**）， I/0 多路复用程序才会继续向文件事件分派器传送下一个套接字；

<img src="/Users/likang/Code/Git/Middleware/04：Redis/photos/event_io.png" alt="event_io" style="zoom:70%;" />

###### I0 多路复用程序的实现

- 









