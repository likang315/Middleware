### MySQL引擎 MyISAM,InnoDB有 什么区别,各有什么特点 ?

MySQL有多种存储引擎,MyISAM和InnoDB是其中常用的两种

MyISAM 是MySQL5.5.8之前 的默认存储引擎

​	1：不支持事务，表锁设计，支持全文索引      

​	2：只缓存索引文件，不缓存数据，数据文件的缓存交给操作系统完成

​	3：MyISAM表存放在三个文 件中:frm 文件存放表格定义，数据文件是MYD (MYData)，索引文件是MYI (MYIndex)

InnoDB是MySQL5.5.8之后 的默认存储引擎

​	1：事务型存储引擎,支持回滚、崩溃恢复能力、多版本并发控制（MVCC）、ACID事务 

​	2：支持行锁设计，支持外键，默认读不会产生锁

​	3：表和索引在一个表空间中,表空间可以包含多个段，数据段，索引段，回滚段....

​	4：插入缓冲（Insert Buffer） ,自适应hash索引，二次写（Double write）



### 从性能上考虑,MySQL InnoDB 表主键如何选择,为什么   ?

**自增主键**

InnoDB 使用聚集索引,数据记录本身被存于主索引(一颗B+Tree)的叶子节点上。这就要求同一个叶子节点内(大小为一个内存页或磁盘页)的 各条数据记录按主键顺序存放,因此每当有一条新的记录插入时,MySQL会根据其主键将其插入适当的节点和位置,如果页面达到装载因子(Inno DB默认为15/16),则开辟一个新的页(节点)。如果表使用自增主键,那么每次**插入新的记录,记录就会顺序添加到当前索引节点的后续位置, 当一页写满,就会自动开辟一个新的页**。这样就会**形成一个紧凑的索引结构,近似顺序填满**。由于每次插入时也不需要移动已有数据,因此效率很 高,也不会增加很多开销在维护索引上

如果使用非自增主键(如果身份证号或学号等),由于每次插入主键的值近似于随机,因此每次新纪录都要被插到现有索引页得中间某个位置,**此 时MySQL不得不为了将新记录插到合适位置而移动数据,甚至目标页面可能已经被回写到磁盘上而从缓存中清掉,**此时又要从磁盘上读回来,这增加了很多开销，**同时频繁的移动、分页操作造成了大量的碎片,得到了不够紧凑的索引结构,**后续不得不通过OPTIMIZE TABLE来重建表并优化填充页面







