### 数据库（DataBase）

------

[TOC]

##### 01：概述

- Database：物理操作系统文件或其他形式的文件类型的集合；
- 关系数据库：描述两个元素之间的关联或对应关系，表与表之间的关系；
  - Microsoft SQL Server；
  - MySQL：小型关系型数据库管理系统，开源的，Oracle 旗下， c/c++编写的，64位系统支持最大的表文件为8TB；
  - Oracle数据库：商用收费，侵权；
- 实例（Instance）：由**后台线程和一个共享内存区域**组成，真正用于操作数据库文件的；
- 表（Table）：关系数据库的基本存储结构，二维的，由行列组成的一张表格；
  - 记录(元组)：数据表中的一行
  - 字段(属性)：数据表中的一列

##### 02：表间关系【三种】

1. 一对一
   - 一个学生对应一个成绩
2. 一对多
   - 一个班级对应多个学生
3. 多对多
   -  学生和老师

##### 03：主键、外健

- **主键(PRIMARY KEY)：**其值能**唯一地标识**表中的每一行，作用是作为其他表的外键和其关联，以及本记录的修改与删除；
- **外键(FOREIGN KEY) ：** 表中存放着另一个表中的主键的字段来表示关联，它的值必须是其他表中主键的
  - FOREIGN KEY (dep_id) REFERENCES dep(id) ；

##### 04：数据库三范式

​	建立规范的数据库是需要满足一些规范的来优化数据的存储方式，在关系型数据库中这些规范就可以称为**范式**。

###### 第一范式:1NF

- 表中所有属性**都不能再在分解**为更基本的数据单位时；
- 每一列中不可以有多个值；

###### 第二范式：2NF

- 在满足第一范式的基础上，要求**数据库表中的每行必须可以被唯一地区分，**为实现区分通常需要为表加上一个列，以存储各个实例的唯一标识（主键）
- 要求实体的属性完全依赖于主关键字，不可分离
- 例：员工信息表中加上了员工编号（emp_id）列，因为每个员工的员工编号是唯一的，因此每个员工可以被唯一区分

###### 第三范式：3NF

- 在满足2NF的基础上，要求**表中不能包含在其它表中已经存在的非主关键字信息**；

###### 巴斯范式（BCNF）：

- 在第三范式的基础上，**消除任何属性对任一候选关键属性的传递函数依赖**；
- 例：假设仓库管理关系表为StorehouseManage(仓库ID, 存储物品ID, 管理员ID, 数量)
  - (仓库ID, 存储物品ID) →(管理员ID, 数量)
  - (管理员ID, 存储物品ID) → (仓库ID, 数量)
  - 所以，(仓库ID, 存储物品ID) 和 (管理员ID, 存储物品ID)都是StorehouseManage的候选关键属性；
  - 即存在关键字字段依赖关键字段的情况，所以其不符合BCNF范式；
- 删除异常：
  - 当仓库被清空后，所有"存储物品ID"和"数量"信息被删除的同时，"仓库ID"和"管理员ID"信息也被删除了；
- 插入异常：
  - 当仓库没有存储任何物品时，无法给仓库分配管理员；
- 更新异常：
  - 如果仓库换了管理员，则表中所有行的管理员ID都要修改；
- 把仓库管理关系表分解为二个关系表：
  - 仓库管理：(仓库ID, 管理员ID)
  - 仓库：(仓库ID, 存储物品ID, 数量)

