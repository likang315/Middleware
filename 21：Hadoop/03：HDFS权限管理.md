### HDFS权限管理

------

[TOC]

------

##### 01：HDFS 

- 每个文件和目录有一个所有者（owner）和一个组（group);
- 对文件而言，当读取这个文件时需要有r权限，当写入或者追加到文件时需要有w权限。对目录而言，当列出目录内容时需要具有r权限，当新建或删除子文件或子目录时需要有w权限，当访问目录的子节点时需要有x权限。

##### 02：用户身份

- 客户端用户身份是通过宿主操作系统给出；

##### 03：配置参数

- dfs.permissions = true
  - 如果是 true，则打开前文所述的权限系统。如果是 false，权限检查就是关闭。chmod，chgrp 和 chown *总是* 会检查权限。这些命令只有在权限检查背景下才有用，所以不会有兼容性问题。这样，这就能让管理员在打开常规的权限检查之前可以可靠地设置文件的所有者和权限。
- dfs.web.ugi = webuser,webgroup
  - Web服务器使用的用户名。如果将这个参数设置为超级用户的名称，则所有Web客户就可以看到所有的信息。如果将这个参数设置为一个不使用的用户，则Web客户就只能访问到“other”权限可访问的资源了。额外的组可以加在后面，形成一个用逗号分隔的列表。
- dfs.permissions.supergroup = supergroup
  - 超级用户的组名
- dfs.upgrade.permission = 777
  - 升级时的初始模式。
- dfs.umask = 022
  - umask参数在创建文件和目录时使用。在配置文件中，可以使用十进制数*1810*。

##### 04：名字空间配额管理

- Hadoop分布式文件系统(HDFS)允许管理员为每个目录设置配额。 新建立的目录没有配额。 最大的配额是Long.Max_Value。配额为1可以强制目录保持为空。
- **目录配额**：是对目录树上该目录下的名字数量做硬性限制。如果创建文件或目录时超过了配额，该操作会失败。
- dfsadmin -setquota <N> <directory>...<directory>
  - 把每个目录配额设为N。
- dfsadmin -clrquota <directory>...<director>
  - 为每个目录删除配额。
- fs -count -q <directory>...<directory>
  - 使用-q选项，会报告每个目录设置的配额，以及剩余配额。 如果目录没有设置配额，会报告none和inf。







