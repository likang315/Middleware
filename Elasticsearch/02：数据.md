### 数据

------

##### 1：文档

- 它特指**最顶层结构**或者**根对象(root object)**序列化成的JSON数据（以唯一ID标识并存储于Elasticsearch中）
- 对象和文档还是有区别的；

1. ###### 文档的元数据(metadata)

| 节点     | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| `_index` | 文档存储的地方【索引】，全部小写                             |
| `_type`  | 文档代表的对象的类，相同类型的type的文档表示相同的"事物"，他们数据结构相同 |
| `_id`    | 文档的唯一标识，当与_index和 _id 联合使用时，就可以定位ES中唯一的文档 |

2. ###### 查找文档

- pretty

  - 美化返回的_source值，便于阅读；

- {"found": true} ：用于判断有没有找到返回的值；

- `-i`：curl 加 -i 参数会返回响应头；

  ```http
  HTTP/1.1 404 Not Found
  Content-Type: application/json; charset=UTF-8
  Content-Length: 83
  
  {
    "_index" : "website",
    "_type" :  "blog",
    "_id" :    "124",
    "found" :  false
  }
  ```

- `_source`：当我们只需要返回指定字段时，使用此参数，多个字段用逗号分隔

  ```sql
  GET /website/blog/123?_source=title,text
  # 只返回 _source 的值，不需要其他元数据
  GET /website/blog/123/_source
  ```

3. ###### 检查文档是不是存在

   - HEAD 请求方法，用于判断文档此刻是否存在；

   - ```sql
     curl -i -XHEAD http://localhost:9200/website/blog/123
     ```

4. ###### 更新整个文档

   - 如果需要更新已存在的文档，可以重建索引(reindex)或者替换掉它；

     ```sql
     PUT /website/blog/123
     {
       "title": "My first blog entry",
       "text":  "I am starting to get the hang of this...",
       "date":  "2014/01/02"
     }
     ```

5. ###### 创建新的文档

   - `_index`、`_type`、`_id`三者唯一确定一个文档；

   - 使用POST方法让ES自动生成唯一ID

     ```sql
     POST /website/blog/
     { ... }
     ```

   - **判断是新创建的，还是覆盖一个已经存在的**，查看返回的结果

     ```
     PUT /website/blog/123?op_type=create
     { ... }
     ```

6. ###### 删除文档

   ```sql
   # 查看返回结果，版本号
   DELETE /website/blog/123
   ```

7. ###### 处理冲突

   - 

8. 



















