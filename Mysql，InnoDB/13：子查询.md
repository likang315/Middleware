### 子查询

------

​	子查询是指包含在另一个SQL语句（包含语句）内部的查询。子查询总是**由括号包围， 并且通常在包含语句之前执行**。 子查询返回类型的结果集；

- 单列单行；
- 单列多行；
- 多列多行；

  子查询返回的结果集类型决定了它可能**如何被使用以及包含语句可能使用哪些运算符来处理子查询返回的数据**。任何子查询返回的数据在包含语句执行完成后都会被丢弃，这使子查询像一个**具有作用域的临时表**。

##### 01：子查询类型

​	 除了按照子查询结果集类型划分， 还可以基于另外一个因素划分子查询： 

- 非关联子查询：一些子查询完全独立；
- 关联查询：引用**包含语句**的列；

##### 02：非关联子查询

###### 单行单列子查询

- **标量子查询**：返回的都是一个单行单列的表；
- 等式条件中使用标量子查询；

###### 多行单列子查询

- 使用 IN，NOT IN 包含查询条件；
- **ALL 运算符**：用于将某单值与**集合中的每个值**进行比较，构键这样的条件需要将其中一个比较运算符与All 配合使用；
  - <> ALL : 包含查询的结果集不等于子查询的中任意一个；
- **ANY 运算符**：将一个值与值集中的每个成员进行比较，但是 ANY 运算符只要有一个比较成立，则条件为真，而 ALL 是所有成立才为真；

###### 多列子查询

- 例：select * from local_student_info where (class_id, age) <> (1001, 22);
  - 第一个字段与值集中第一个值比较，第二个字段与值集中第二个只比，依次类推；

##### 03：关联子查询

- 